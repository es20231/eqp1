{% extends 'dashboard.html' %}
{% block conteudo %}
<link rel="stylesheet" href="{{url_for('static', filename='css/style_gallery.css')}}">

<div class="add">
    <div class="add-picture">
        <form method="POST" enctype="multipart/form-data" action="{{url_for('upload_image')}}">
            <div class="input-group">
                <input type="file" name="image">
                <input  type="submit" value="+ Adicionar">
            </div>
        </form>
    </div>
</div>


<p>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category,message in messages %}
                {% if category == "file_error" %}
                    <div class="alert">
                        <label class="flashes">{{message}}</label>
                    </div>
                {% elif category == "compatibility_error" %}
                    <div class="alert">
                        <label class="flashes">{{message}}</label>
                    </div>
                {% elif category == "upload_sucess" %}
                    <div class="alert_pass">
                        <label class="flashes_pass">{{message}}</label>
                    </div>
                {% elif category == "delete_success" %}
                    <div class="alert_pass">
                        <label class="flashes_pass">{{message}}</label>
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endwith %}
</p> 

<div class="container">
    {% for image in pagination %}
    <div class="card-picture">
        <img src="data:;base64,{{image.string_data}}" alt="">
        <div class="buttons">
            <button class="btn-post">Postar</button>
            <a href="{{image.id}}/gallery" 
            onclick="return confirm('Deseja realmente excluir esta imagem da sua galeria de fotos?')"
             class="btn-excluir">Excluir</a>
        </div>
    </div>
    <hr class="line-below">
    {% endfor %}
    {% if pagination.has_prev %}
        <a href="{{url_for('gallery', page=pagination.prev_num)}}"> Fotos Anteriores</a>
    {% endif %}
    {% if pagination.has_next %}
        <a href="{{url_for('gallery', page=pagination.next_num)}}"> Pr√≥ximas Fotos</a>
    {% endif %}
</div>
{% endblock conteudo %}